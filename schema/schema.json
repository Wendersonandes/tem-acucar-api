{
  "$schema": "http://interagent.github.io/interagent-hyper-schema",
  "type": [
    "object"
  ],
  "definitions": {
    "authentication": {
      "$schema": "http://json-schema.org/draft-04/hyper-schema",
      "title": "Tem Açúcar - Authentication",
      "description": "An authentication represents an individual signed in to use the Tem Açúcar app",
      "stability": "prototype",
      "type": [
        "object"
      ],
      "definitions": {
        "id": {
          "description": "unique identifier of authentication",
          "readOnly": true,
          "format": "uuid",
          "type": [
            "string"
          ]
        },
        "user_id": {
          "description": "unique identifier of authentication user",
          "readOnly": true,
          "format": "uuid",
          "type": [
            "string"
          ]
        },
        "provider": {
          "description": "provider of authentication",
          "readOnly": true,
          "format": "ipv4",
          "enum": [
            "email",
            "facebook"
          ],
          "type": [
            "string"
          ]
        },
        "ip": {
          "description": "ip address of authentication",
          "readOnly": true,
          "format": "ipv4",
          "type": [
            "string"
          ]
        },
        "identity": {
          "anyOf": [
            {
              "$ref": "#/definitions/authentication/definitions/id"
            }
          ]
        },
        "created_at": {
          "description": "when authentication was created",
          "readOnly": true,
          "format": "date-time",
          "type": [
            "string"
          ]
        },
        "updated_at": {
          "description": "when authentication was updated",
          "readOnly": true,
          "format": "date-time",
          "type": [
            "string"
          ]
        },
        "facebook_token": {
          "description": "Facebook token of authentication user",
          "readOnly": true,
          "type": [
            "string"
          ]
        }
      },
      "links": [
        {
          "description": "Sign in with a new authentication.",
          "href": "/authentications",
          "method": "POST",
          "rel": "create",
          "schema": {
            "additionalProperties": false,
            "properties": {
              "email": {
                "$ref": "#/definitions/user/definitions/email"
              },
              "password": {
                "$ref": "#/definitions/user/definitions/password"
              },
              "facebook_token": {
                "$ref": "#/definitions/authentication/definitions/facebook_token"
              }
            },
            "type": [
              "object"
            ]
          },
          "targetSchema": {
            "anyOf": [
              {
                "$ref": "#/definitions/user"
              },
              {
                "$ref": "#/definitions/error"
              }
            ]
          },
          "title": "Create"
        },
        {
          "description": "Sign out from an existing authentication.",
          "href": "/authentications",
          "method": "DELETE",
          "rel": "destroy",
          "schema": {
            "strictProperties": true,
            "properties": null,
            "type": [
              "object"
            ]
          },
          "targetSchema": {
            "anyOf": [
              {
                "$ref": "#/definitions/user"
              },
              {
                "$ref": "#/definitions/error"
              }
            ]
          },
          "title": "Delete"
        }
      ],
      "properties": {
        "id": {
          "$ref": "#/definitions/authentication/definitions/id"
        },
        "user_id": {
          "$ref": "#/definitions/authentication/definitions/user_id"
        },
        "provider": {
          "$ref": "#/definitions/authentication/definitions/provider"
        },
        "ip": {
          "$ref": "#/definitions/authentication/definitions/ip"
        },
        "created_at": {
          "$ref": "#/definitions/authentication/definitions/created_at"
        },
        "updated_at": {
          "$ref": "#/definitions/authentication/definitions/updated_at"
        }
      },
      "required": [
        "id"
      ],
      "additionalProperties": false
    },
    "demand": {
      "$schema": "http://json-schema.org/draft-04/hyper-schema",
      "title": "Tem Açúcar - Demand",
      "description": "A demand represents something a user asks to the neighborhood",
      "stability": "prototype",
      "type": [
        "object"
      ],
      "definitions": {
        "id": {
          "description": "unique identifier of the demand",
          "readOnly": true,
          "format": "uuid",
          "type": [
            "string"
          ]
        },
        "user": {
          "description": "user of the demand",
          "readOnly": true,
          "type": [
            "object"
          ],
          "targetSchema": {
            "$ref": "#/definitions/user"
          }
        },
        "state": {
          "description": "state of the demand",
          "enum": [
            "sending",
            "active",
            "canceled",
            "completed",
            "flagged"
          ],
          "type": [
            "string"
          ]
        },
        "name": {
          "description": "name of the demand",
          "type": [
            "string"
          ]
        },
        "description": {
          "description": "description of the demand",
          "type": [
            "string"
          ]
        },
        "latitude": {
          "description": "latitude of the demand",
          "type": [
            "number"
          ]
        },
        "longitude": {
          "description": "longitude of the demand",
          "type": [
            "number"
          ]
        },
        "radius": {
          "description": "radius of the demand in kilometers",
          "type": [
            "number"
          ]
        },
        "distance": {
          "description": "distant from current user of the demand in kilometers",
          "type": [
            "number",
            "null"
          ]
        },
        "transactions": {
          "description": "transactions of the demand",
          "readOnly": true,
          "type": [
            "array"
          ]
        },
        "limit": {
          "description": "maximum of results to be returned when listing demands, '10' if not informed",
          "type": [
            "string",
            "null"
          ]
        },
        "offset": {
          "description": "offset (starting point) to be used when listing demands, '0' if not informed",
          "type": [
            "string",
            "null"
          ]
        },
        "filter": {
          "description": "type of filter to be used when listing demands, 'neighborhood' if not informed",
          "enum": [
            "neighborhood",
            "transactions",
            "user",
            "admin",
            "flagged"
          ],
          "type": [
            "string",
            "null"
          ]
        },
        "identity": {
          "anyOf": [
            {
              "$ref": "#/definitions/demand/definitions/id"
            }
          ]
        },
        "created_at": {
          "description": "when demand was created",
          "format": "date-time",
          "type": [
            "string"
          ]
        },
        "updated_at": {
          "description": "when demand was updated",
          "format": "date-time",
          "type": [
            "string"
          ]
        }
      },
      "links": [
        {
          "description": "Create a new demand.",
          "href": "/demands",
          "method": "POST",
          "rel": "create",
          "schema": {
            "additionalProperties": false,
            "properties": {
              "name": {
                "$ref": "#/definitions/demand/definitions/name"
              },
              "description": {
                "$ref": "#/definitions/demand/definitions/description"
              },
              "radius": {
                "$ref": "#/definitions/demand/definitions/radius"
              }
            },
            "type": [
              "object"
            ]
          },
          "targetSchema": {
            "anyOf": [
              {
                "$ref": "#/definitions/demand"
              },
              {
                "$ref": "#/definitions/error"
              }
            ]
          },
          "title": "Create"
        },
        {
          "description": "List existing demands.",
          "href": "/demands",
          "method": "GET",
          "rel": "instances",
          "schema": {
            "additionalProperties": false,
            "properties": {
              "limit": {
                "$ref": "#/definitions/demand/definitions/limit"
              },
              "offset": {
                "$ref": "#/definitions/demand/definitions/offset"
              },
              "filter": {
                "$ref": "#/definitions/demand/definitions/filter"
              }
            },
            "type": [
              "object"
            ]
          },
          "targetSchema": {
            "anyOf": [
              {
                "type": [
                  "array"
                ],
                "items": {
                  "$ref": "#/definitions/demand"
                }
              },
              {
                "$ref": "#/definitions/error"
              }
            ]
          },
          "title": "List"
        },
        {
          "description": "Complete a demand",
          "href": "/demands/{(%23%2Fdefinitions%2Fuser%2Fdefinitions%2Fidentity)}/complete",
          "method": "PUT",
          "rel": "update",
          "schema": {
            "additionalProperties": false,
            "properties": null,
            "type": [
              "object"
            ]
          },
          "targetSchema": {
            "anyOf": [
              {
                "$ref": "#/definitions/demand"
              },
              {
                "$ref": "#/definitions/error"
              }
            ]
          },
          "title": "Complete"
        },
        {
          "description": "Cancel a demand",
          "href": "/demands/{(%23%2Fdefinitions%2Fuser%2Fdefinitions%2Fidentity)}/cancel",
          "method": "PUT",
          "rel": "update",
          "schema": {
            "additionalProperties": false,
            "properties": null,
            "type": [
              "object"
            ]
          },
          "targetSchema": {
            "anyOf": [
              {
                "$ref": "#/definitions/demand"
              },
              {
                "$ref": "#/definitions/error"
              }
            ]
          },
          "title": "Cancel"
        },
        {
          "description": "Reactivate a demand",
          "href": "/demands/{(%23%2Fdefinitions%2Fuser%2Fdefinitions%2Fidentity)}/reactivate",
          "method": "PUT",
          "rel": "update",
          "schema": {
            "additionalProperties": false,
            "properties": null,
            "type": [
              "object"
            ]
          },
          "targetSchema": {
            "anyOf": [
              {
                "$ref": "#/definitions/demand"
              },
              {
                "$ref": "#/definitions/error"
              }
            ]
          },
          "title": "Reactivate"
        }
      ],
      "properties": {
        "id": {
          "$ref": "#/definitions/demand/definitions/id"
        },
        "user": {
          "$ref": "#/definitions/demand/definitions/user"
        },
        "transactions": {
          "$ref": "#/definitions/demand/definitions/transactions"
        },
        "state": {
          "$ref": "#/definitions/demand/definitions/state"
        },
        "name": {
          "$ref": "#/definitions/demand/definitions/name"
        },
        "latitude": {
          "$ref": "#/definitions/demand/definitions/latitude"
        },
        "longitude": {
          "$ref": "#/definitions/demand/definitions/longitude"
        },
        "radius": {
          "$ref": "#/definitions/demand/definitions/radius"
        },
        "distance": {
          "$ref": "#/definitions/demand/definitions/distance"
        },
        "description": {
          "$ref": "#/definitions/demand/definitions/description"
        },
        "created_at": {
          "$ref": "#/definitions/demand/definitions/created_at"
        },
        "updated_at": {
          "$ref": "#/definitions/demand/definitions/updated_at"
        }
      },
      "required": [
        "id",
        "user",
        "state",
        "name",
        "description",
        "created_at"
      ],
      "additionalProperties": false
    },
    "error": {
      "$schema": "http://json-schema.org/draft-04/hyper-schema",
      "title": "Tem Açúcar - Error",
      "description": "An error represents a failed action in Tem Açúcar API",
      "stability": "prototype",
      "strictProperties": true,
      "type": [
        "object"
      ],
      "definitions": {
        "id": {
          "description": "unique identifier of error",
          "readOnly": true,
          "pattern": "^\\w+$",
          "type": [
            "string"
          ]
        },
        "message": {
          "description": "message of error",
          "readOnly": true,
          "type": [
            "string"
          ]
        },
        "identity": {
          "anyOf": [
            {
              "$ref": "#/definitions/error/definitions/id"
            }
          ]
        }
      },
      "properties": {
        "id": {
          "$ref": "#/definitions/error/definitions/id"
        },
        "message": {
          "$ref": "#/definitions/error/definitions/message"
        }
      }
    },
    "flag": {
      "$schema": "http://json-schema.org/draft-04/hyper-schema",
      "title": "Tem Açúcar - Flag",
      "description": "A flag represents the act of an user reporting a demand as inappropriate",
      "stability": "prototype",
      "type": [
        "object"
      ],
      "definitions": {
        "id": {
          "description": "unique identifier of the flag",
          "readOnly": true,
          "format": "uuid",
          "type": [
            "string"
          ]
        },
        "demand": {
          "description": "demand of the flag",
          "readOnly": true,
          "type": [
            "object"
          ],
          "targetSchema": {
            "$ref": "#/definitions/demand"
          }
        },
        "user": {
          "description": "user of the flag",
          "readOnly": true,
          "type": [
            "object"
          ],
          "targetSchema": {
            "$ref": "#/definitions/user"
          }
        },
        "demand_id": {
          "description": "unique identifier of flag demand",
          "readOnly": true,
          "format": "uuid",
          "type": [
            "string"
          ]
        },
        "user_id": {
          "description": "unique identifier of flag user",
          "readOnly": true,
          "format": "uuid",
          "type": [
            "string"
          ]
        },
        "identity": {
          "anyOf": [
            {
              "$ref": "#/definitions/flag/definitions/id"
            }
          ]
        },
        "created_at": {
          "description": "when flag was created",
          "format": "date-time",
          "type": [
            "string"
          ]
        },
        "updated_at": {
          "description": "when flag was updated",
          "format": "date-time",
          "type": [
            "string"
          ]
        }
      },
      "links": [
        {
          "description": "Create a new flag.",
          "href": "/flags",
          "method": "POST",
          "rel": "create",
          "schema": {
            "additionalProperties": false,
            "properties": {
              "demand_id": {
                "$ref": "#/definitions/flag/definitions/demand_id"
              }
            },
            "type": [
              "object"
            ]
          },
          "targetSchema": {
            "anyOf": [
              {
                "$ref": "#/definitions/flag"
              },
              {
                "$ref": "#/definitions/error"
              }
            ]
          },
          "title": "Create"
        }
      ],
      "properties": {
        "id": {
          "$ref": "#/definitions/flag/definitions/id"
        },
        "demand": {
          "$ref": "#/definitions/flag/definitions/demand"
        },
        "user": {
          "$ref": "#/definitions/flag/definitions/user"
        },
        "demand_id": {
          "$ref": "#/definitions/flag/definitions/demand_id"
        },
        "user_id": {
          "$ref": "#/definitions/flag/definitions/user_id"
        },
        "created_at": {
          "$ref": "#/definitions/flag/definitions/created_at"
        },
        "updated_at": {
          "$ref": "#/definitions/flag/definitions/updated_at"
        }
      },
      "required": [
        "id"
      ],
      "additionalProperties": false
    },
    "me": {
      "$schema": "http://json-schema.org/draft-04/hyper-schema",
      "title": "Tem Açúcar - Me",
      "description": "Me represents the individual signed in to use the Tem Açúcar app",
      "stability": "prototype",
      "strictProperties": true,
      "type": [
        "object"
      ],
      "links": [
        {
          "description": "Info for signed in user.",
          "href": "/me",
          "method": "GET",
          "rel": "self",
          "title": "Info",
          "targetSchema": {
            "anyOf": [
              {
                "$ref": "#/definitions/user"
              },
              {
                "$ref": "#/definitions/error"
              }
            ]
          }
        }
      ]
    },
    "message": {
      "$schema": "http://json-schema.org/draft-04/hyper-schema",
      "title": "Tem Açúcar - Message",
      "description": "A message is a communication between users about a transaction",
      "stability": "prototype",
      "type": [
        "object"
      ],
      "definitions": {
        "id": {
          "description": "unique identifier of the message",
          "readOnly": true,
          "format": "uuid",
          "type": [
            "string"
          ]
        },
        "transaction": {
          "description": "transaction of the message",
          "readOnly": true,
          "type": [
            "object"
          ],
          "targetSchema": {
            "$ref": "#/definitions/transaction"
          }
        },
        "user": {
          "description": "user of the message",
          "readOnly": true,
          "type": [
            "object"
          ],
          "targetSchema": {
            "$ref": "#/definitions/user"
          }
        },
        "transaction_id": {
          "description": "unique identifier of message transaction",
          "readOnly": true,
          "format": "uuid",
          "type": [
            "string"
          ]
        },
        "user_id": {
          "description": "unique identifier of message user",
          "readOnly": true,
          "format": "uuid",
          "type": [
            "string"
          ]
        },
        "text": {
          "text": "text of the message",
          "type": [
            "string"
          ]
        },
        "limit": {
          "description": "maximum of results to be returned when listing demands, '10' if not informed",
          "type": [
            "string",
            "null"
          ]
        },
        "offset": {
          "description": "offset (starting point) to be used when listing demands, '0' if not informed",
          "type": [
            "string",
            "null"
          ]
        },
        "identity": {
          "anyOf": [
            {
              "$ref": "#/definitions/message/definitions/id"
            }
          ]
        },
        "created_at": {
          "description": "when message was created",
          "format": "date-time",
          "type": [
            "string"
          ]
        },
        "updated_at": {
          "description": "when message was updated",
          "format": "date-time",
          "type": [
            "string"
          ]
        }
      },
      "links": [
        {
          "description": "Create a new message.",
          "href": "/messages",
          "method": "POST",
          "rel": "create",
          "schema": {
            "additionalProperties": false,
            "properties": {
              "transaction_id": {
                "$ref": "#/definitions/message/definitions/transaction_id"
              },
              "text": {
                "$ref": "#/definitions/message/definitions/text"
              }
            },
            "type": [
              "object"
            ]
          },
          "targetSchema": {
            "anyOf": [
              {
                "$ref": "#/definitions/message"
              },
              {
                "$ref": "#/definitions/error"
              }
            ]
          },
          "title": "Create"
        },
        {
          "description": "List existing messages.",
          "href": "/messages",
          "method": "GET",
          "rel": "instances",
          "schema": {
            "additionalProperties": false,
            "properties": {
              "limit": {
                "$ref": "#/definitions/message/definitions/limit"
              },
              "offset": {
                "$ref": "#/definitions/message/definitions/offset"
              },
              "transaction_id": {
                "$ref": "#/definitions/message/definitions/transaction_id"
              }
            },
            "required": [
              "transaction_id"
            ],
            "type": [
              "object"
            ]
          },
          "targetSchema": {
            "anyOf": [
              {
                "type": [
                  "array"
                ],
                "items": {
                  "$ref": "#/definitions/message"
                }
              },
              {
                "$ref": "#/definitions/error"
              }
            ]
          },
          "title": "List"
        }
      ],
      "properties": {
        "id": {
          "$ref": "#/definitions/message/definitions/id"
        },
        "transaction": {
          "$ref": "#/definitions/message/definitions/transaction"
        },
        "user": {
          "$ref": "#/definitions/message/definitions/user"
        },
        "transaction_id": {
          "$ref": "#/definitions/message/definitions/transaction_id"
        },
        "user_id": {
          "$ref": "#/definitions/message/definitions/user_id"
        },
        "text": {
          "$ref": "#/definitions/message/definitions/text"
        },
        "created_at": {
          "$ref": "#/definitions/message/definitions/created_at"
        },
        "updated_at": {
          "$ref": "#/definitions/message/definitions/updated_at"
        }
      },
      "required": [
        "id",
        "user_id",
        "text",
        "created_at"
      ],
      "additionalProperties": false
    },
    "password": {
      "$schema": "http://json-schema.org/draft-04/hyper-schema",
      "title": "Tem Açúcar - Password",
      "description": "A password represents an users's attempt to reset her password on the Tem Açúcar app",
      "stability": "prototype",
      "strictProperties": true,
      "type": [
        "object"
      ],
      "definitions": {
        "token": {
          "description": "Reset password token for user",
          "readOnly": true,
          "type": [
            "string"
          ]
        }
      },
      "links": [
        {
          "description": "Request token to create a new password to be sent to user's email.",
          "href": "/password",
          "method": "POST",
          "rel": "create",
          "schema": {
            "strictProperties": true,
            "properties": {
              "email": {
                "$ref": "#/definitions/user/definitions/email"
              }
            },
            "type": [
              "object"
            ]
          },
          "targetSchema": {
            "anyOf": [
              {
                "$ref": "#/definitions/password"
              },
              {
                "$ref": "#/definitions/error"
              }
            ]
          },
          "title": "Request token"
        },
        {
          "description": "Reset user password through token set to user's email.",
          "href": "/password",
          "method": "PUT",
          "rel": "update",
          "schema": {
            "strictProperties": true,
            "properties": {
              "email": {
                "$ref": "#/definitions/user/definitions/email"
              },
              "password": {
                "$ref": "#/definitions/user/definitions/password"
              },
              "token": {
                "$ref": "#/definitions/password/definitions/token"
              }
            },
            "type": [
              "object"
            ]
          },
          "targetSchema": {
            "anyOf": [
              {
                "$ref": "#/definitions/user"
              },
              {
                "$ref": "#/definitions/error"
              }
            ]
          },
          "title": "Reset password"
        }
      ],
      "properties": null
    },
    "refusal": {
      "$schema": "http://json-schema.org/draft-04/hyper-schema",
      "title": "Tem Açúcar - Refusal",
      "description": "A refusal represents the act of an user refusing a demand",
      "stability": "prototype",
      "type": [
        "object"
      ],
      "definitions": {
        "id": {
          "description": "unique identifier of the refusal",
          "readOnly": true,
          "format": "uuid",
          "type": [
            "string"
          ]
        },
        "demand": {
          "description": "demand of the refusal",
          "readOnly": true,
          "type": [
            "object"
          ],
          "targetSchema": {
            "$ref": "#/definitions/demand"
          }
        },
        "user": {
          "description": "user of the refusal",
          "readOnly": true,
          "type": [
            "object"
          ],
          "targetSchema": {
            "$ref": "#/definitions/user"
          }
        },
        "demand_id": {
          "description": "unique identifier of refusal demand",
          "readOnly": true,
          "format": "uuid",
          "type": [
            "string"
          ]
        },
        "user_id": {
          "description": "unique identifier of refusal user",
          "readOnly": true,
          "format": "uuid",
          "type": [
            "string"
          ]
        },
        "identity": {
          "anyOf": [
            {
              "$ref": "#/definitions/refusal/definitions/id"
            }
          ]
        },
        "created_at": {
          "description": "when refusal was created",
          "format": "date-time",
          "type": [
            "string"
          ]
        },
        "updated_at": {
          "description": "when refusal was updated",
          "format": "date-time",
          "type": [
            "string"
          ]
        }
      },
      "links": [
        {
          "description": "Create a new refusal.",
          "href": "/refusals",
          "method": "POST",
          "rel": "create",
          "schema": {
            "additionalProperties": false,
            "properties": {
              "demand_id": {
                "$ref": "#/definitions/refusal/definitions/demand_id"
              }
            },
            "type": [
              "object"
            ]
          },
          "targetSchema": {
            "anyOf": [
              {
                "$ref": "#/definitions/refusal"
              },
              {
                "$ref": "#/definitions/error"
              }
            ]
          },
          "title": "Create"
        }
      ],
      "properties": {
        "id": {
          "$ref": "#/definitions/refusal/definitions/id"
        },
        "demand": {
          "$ref": "#/definitions/refusal/definitions/demand"
        },
        "user": {
          "$ref": "#/definitions/refusal/definitions/user"
        },
        "demand_id": {
          "$ref": "#/definitions/refusal/definitions/demand_id"
        },
        "user_id": {
          "$ref": "#/definitions/refusal/definitions/user_id"
        },
        "created_at": {
          "$ref": "#/definitions/refusal/definitions/created_at"
        },
        "updated_at": {
          "$ref": "#/definitions/refusal/definitions/updated_at"
        }
      },
      "required": [
        "id"
      ],
      "additionalProperties": false
    },
    "transaction": {
      "$schema": "http://json-schema.org/draft-04/hyper-schema",
      "title": "Tem Açúcar - Transaction",
      "description": "A transaction is the group of messages from a user to the user of a demand",
      "stability": "prototype",
      "type": [
        "object"
      ],
      "definitions": {
        "id": {
          "description": "unique identifier of the transaction",
          "readOnly": true,
          "format": "uuid",
          "type": [
            "string"
          ]
        },
        "demand": {
          "description": "demand of the transaction",
          "readOnly": true,
          "type": [
            "object"
          ],
          "targetSchema": {
            "$ref": "#/definitions/demand"
          }
        },
        "user": {
          "description": "user of the transaction",
          "readOnly": true,
          "type": [
            "object"
          ],
          "targetSchema": {
            "$ref": "#/definitions/user"
          }
        },
        "demand_id": {
          "description": "unique identifier of transaction demand",
          "readOnly": true,
          "format": "uuid",
          "type": [
            "string"
          ]
        },
        "user_id": {
          "description": "unique identifier of transaction user",
          "readOnly": true,
          "format": "uuid",
          "type": [
            "string"
          ]
        },
        "last_message_text": {
          "description": "text of the last message of the transaction",
          "readOnly": true,
          "type": [
            "string",
            "null"
          ]
        },
        "identity": {
          "anyOf": [
            {
              "$ref": "#/definitions/transaction/definitions/id"
            }
          ]
        },
        "created_at": {
          "description": "when transaction was created",
          "format": "date-time",
          "type": [
            "string"
          ]
        },
        "updated_at": {
          "description": "when transaction was updated",
          "format": "date-time",
          "type": [
            "string"
          ]
        }
      },
      "links": [
        {
          "description": "Create a new transaction.",
          "href": "/transactions",
          "method": "POST",
          "rel": "create",
          "schema": {
            "additionalProperties": false,
            "properties": {
              "demand_id": {
                "$ref": "#/definitions/transaction/definitions/demand_id"
              }
            },
            "type": [
              "object"
            ]
          },
          "targetSchema": {
            "anyOf": [
              {
                "$ref": "#/definitions/transaction"
              },
              {
                "$ref": "#/definitions/error"
              }
            ]
          },
          "title": "Create"
        },
        {
          "description": "List existing transactions.",
          "href": "/transactions",
          "method": "GET",
          "rel": "instances",
          "schema": {
            "strictProperties": true,
            "properties": {
              "demand_id": {
                "$ref": "#/definitions/transaction/definitions/demand_id"
              }
            },
            "type": [
              "object"
            ]
          },
          "targetSchema": {
            "anyOf": [
              {
                "type": [
                  "array"
                ],
                "items": {
                  "$ref": "#/definitions/transaction"
                }
              },
              {
                "$ref": "#/definitions/error"
              }
            ]
          },
          "title": "List"
        }
      ],
      "properties": {
        "id": {
          "$ref": "#/definitions/transaction/definitions/id"
        },
        "demand": {
          "$ref": "#/definitions/transaction/definitions/demand"
        },
        "user": {
          "$ref": "#/definitions/transaction/definitions/user"
        },
        "demand_id": {
          "$ref": "#/definitions/transaction/definitions/demand_id"
        },
        "user_id": {
          "$ref": "#/definitions/transaction/definitions/user_id"
        },
        "last_message_text": {
          "$ref": "#/definitions/transaction/definitions/last_message_text"
        },
        "created_at": {
          "$ref": "#/definitions/transaction/definitions/created_at"
        },
        "updated_at": {
          "$ref": "#/definitions/transaction/definitions/updated_at"
        }
      },
      "required": [
        "id",
        "demand",
        "user",
        "last_message_text"
      ],
      "additionalProperties": false
    },
    "user": {
      "$schema": "http://json-schema.org/draft-04/hyper-schema",
      "title": "Tem Açúcar - User",
      "description": "An user represents an individual signed up to use the Tem Açúcar app",
      "stability": "prototype",
      "type": [
        "object"
      ],
      "definitions": {
        "id": {
          "description": "unique identifier of user",
          "readOnly": true,
          "format": "uuid",
          "type": [
            "string"
          ]
        },
        "old_id": {
          "description": "old Tem Açúcar website id",
          "readOnly": true,
          "type": [
            "number",
            "null"
          ]
        },
        "email": {
          "description": "unique email address of user",
          "format": "email",
          "type": [
            "string"
          ]
        },
        "secondary_email": {
          "description": "secondary email address of user",
          "format": "email",
          "type": [
            "string",
            "null"
          ]
        },
        "facebook_uid": {
          "description": "unique Facebook identifier of user",
          "readOnly": true,
          "type": [
            "string",
            "null"
          ]
        },
        "first_name": {
          "description": "first name of user",
          "type": [
            "string"
          ]
        },
        "last_name": {
          "description": "last name of user",
          "type": [
            "string"
          ]
        },
        "password": {
          "description": "unencrypted password of user, used only on user creation",
          "type": [
            "string"
          ],
          "minLength": 8
        },
        "latitude": {
          "description": "latitude of user",
          "type": [
            "number",
            "null"
          ]
        },
        "longitude": {
          "description": "longitude of user",
          "type": [
            "number",
            "null"
          ]
        },
        "distance": {
          "description": "distant from current user of the demand in kilometers",
          "type": [
            "number",
            "null"
          ]
        },
        "address_name": {
          "description": "address name of user",
          "type": [
            "string",
            "null"
          ]
        },
        "address_thoroughfare": {
          "description": "address thoroughfare of user",
          "type": [
            "string",
            "null"
          ]
        },
        "address_sub_thoroughfare": {
          "description": "address sub thoroughfare of user",
          "type": [
            "string",
            "null"
          ]
        },
        "address_sub_locality": {
          "description": "address sub locality of user",
          "type": [
            "string",
            "null"
          ]
        },
        "address_locality": {
          "description": "address locality of user",
          "type": [
            "string",
            "null"
          ]
        },
        "address_sub_administrative_area": {
          "description": "address sub administrative area of user",
          "type": [
            "string",
            "null"
          ]
        },
        "address_administrative_area": {
          "description": "address administrative area of user",
          "type": [
            "string",
            "null"
          ]
        },
        "address_country": {
          "description": "address country of user",
          "type": [
            "string",
            "null"
          ]
        },
        "address_postal_code": {
          "description": "address postal code of user",
          "type": [
            "string",
            "null"
          ]
        },
        "address_complement": {
          "description": "address complement of user",
          "type": [
            "string",
            "null"
          ]
        },
        "uploaded_image_url": {
          "description": "uploaded image url of user",
          "type": [
            "string",
            "null"
          ]
        },
        "facebook_image_url": {
          "description": "facebook image url of user",
          "type": [
            "string",
            "null"
          ]
        },
        "image_url": {
          "description": "image url of user calculated from uploaded_image_url, facebook_image_url or gravatar",
          "type": [
            "string"
          ]
        },
        "accepted_terms": {
          "description": "wheter or not user has accepted Tem Açúcar terms of use",
          "type": [
            "boolean"
          ]
        },
        "reviewed_email": {
          "description": "wheter or not user has reviewed her primary email address",
          "type": [
            "boolean"
          ]
        },
        "reviewed_location": {
          "description": "wheter or not user has reviewed her address",
          "type": [
            "boolean"
          ]
        },
        "admin": {
          "description": "wheter or not user can administrate the whole Tem Açúcar app",
          "readOnly": true,
          "type": [
            "boolean"
          ]
        },
        "identity": {
          "anyOf": [
            {
              "$ref": "#/definitions/user/definitions/id"
            }
          ]
        },
        "created_at": {
          "description": "when user was created",
          "readOnly": true,
          "format": "date-time",
          "type": [
            "string"
          ]
        },
        "updated_at": {
          "description": "when user was updated",
          "readOnly": true,
          "format": "date-time",
          "type": [
            "string"
          ]
        }
      },
      "links": [
        {
          "description": "Create a new user.",
          "href": "/users",
          "method": "POST",
          "rel": "create",
          "schema": {
            "strictProperties": true,
            "properties": {
              "email": {
                "$ref": "#/definitions/user/definitions/email"
              },
              "first_name": {
                "$ref": "#/definitions/user/definitions/first_name"
              },
              "last_name": {
                "$ref": "#/definitions/user/definitions/last_name"
              },
              "password": {
                "$ref": "#/definitions/user/definitions/password"
              }
            },
            "type": [
              "object"
            ]
          },
          "targetSchema": {
            "anyOf": [
              {
                "$ref": "#/definitions/user"
              },
              {
                "$ref": "#/definitions/error"
              }
            ]
          },
          "title": "Create"
        },
        {
          "description": "Info for existing user.",
          "href": "/users/{(%23%2Fdefinitions%2Fuser%2Fdefinitions%2Fidentity)}",
          "method": "GET",
          "rel": "self",
          "targetSchema": {
            "anyOf": [
              {
                "$ref": "#/definitions/user"
              },
              {
                "$ref": "#/definitions/error"
              }
            ]
          },
          "title": "Info"
        },
        {
          "description": "List existing users.",
          "href": "/users",
          "method": "GET",
          "rel": "instances",
          "targetSchema": {
            "anyOf": [
              {
                "type": [
                  "array"
                ],
                "items": {
                  "$ref": "#/definitions/user"
                }
              },
              {
                "$ref": "#/definitions/error"
              }
            ]
          },
          "title": "List"
        },
        {
          "description": "Update an existing user.",
          "href": "/users/{(%23%2Fdefinitions%2Fuser%2Fdefinitions%2Fidentity)}",
          "method": "PUT",
          "rel": "update",
          "schema": {
            "additionalProperties": false,
            "properties": {
              "email": {
                "$ref": "#/definitions/user/definitions/email"
              },
              "secondary_email": {
                "$ref": "#/definitions/user/definitions/secondary_email"
              },
              "first_name": {
                "$ref": "#/definitions/user/definitions/first_name"
              },
              "last_name": {
                "$ref": "#/definitions/user/definitions/last_name"
              },
              "latitude": {
                "$ref": "#/definitions/user/definitions/latitude"
              },
              "longitude": {
                "$ref": "#/definitions/user/definitions/longitude"
              },
              "address_name": {
                "$ref": "#/definitions/user/definitions/address_name"
              },
              "address_thoroughfare": {
                "$ref": "#/definitions/user/definitions/address_thoroughfare"
              },
              "address_sub_thoroughfare": {
                "$ref": "#/definitions/user/definitions/address_sub_thoroughfare"
              },
              "address_sub_locality": {
                "$ref": "#/definitions/user/definitions/address_sub_locality"
              },
              "address_locality": {
                "$ref": "#/definitions/user/definitions/address_locality"
              },
              "address_sub_administrative_area": {
                "$ref": "#/definitions/user/definitions/address_sub_administrative_area"
              },
              "address_administrative_area": {
                "$ref": "#/definitions/user/definitions/address_administrative_area"
              },
              "address_country": {
                "$ref": "#/definitions/user/definitions/address_country"
              },
              "address_postal_code": {
                "$ref": "#/definitions/user/definitions/address_postal_code"
              },
              "address_complement": {
                "$ref": "#/definitions/user/definitions/address_complement"
              },
              "uploaded_image_url": {
                "$ref": "#/definitions/user/definitions/uploaded_image_url"
              },
              "facebook_image_url": {
                "$ref": "#/definitions/user/definitions/facebook_image_url"
              },
              "accepted_terms": {
                "$ref": "#/definitions/user/definitions/accepted_terms"
              },
              "reviewed_email": {
                "$ref": "#/definitions/user/definitions/reviewed_email"
              },
              "reviewed_location": {
                "$ref": "#/definitions/user/definitions/reviewed_location"
              }
            },
            "type": [
              "object"
            ]
          },
          "targetSchema": {
            "anyOf": [
              {
                "$ref": "#/definitions/user"
              },
              {
                "$ref": "#/definitions/error"
              }
            ]
          },
          "title": "Update"
        }
      ],
      "properties": {
        "id": {
          "$ref": "#/definitions/user/definitions/id"
        },
        "email": {
          "$ref": "#/definitions/user/definitions/email"
        },
        "secondary_email": {
          "$ref": "#/definitions/user/definitions/secondary_email"
        },
        "facebook_uid": {
          "$ref": "#/definitions/user/definitions/facebook_uid"
        },
        "first_name": {
          "$ref": "#/definitions/user/definitions/first_name"
        },
        "last_name": {
          "$ref": "#/definitions/user/definitions/last_name"
        },
        "latitude": {
          "$ref": "#/definitions/user/definitions/latitude"
        },
        "longitude": {
          "$ref": "#/definitions/user/definitions/longitude"
        },
        "distance": {
          "$ref": "#/definitions/user/definitions/distance"
        },
        "address_name": {
          "$ref": "#/definitions/user/definitions/address_name"
        },
        "address_thoroughfare": {
          "$ref": "#/definitions/user/definitions/address_thoroughfare"
        },
        "address_sub_thoroughfare": {
          "$ref": "#/definitions/user/definitions/address_sub_thoroughfare"
        },
        "address_sub_locality": {
          "$ref": "#/definitions/user/definitions/address_sub_locality"
        },
        "address_locality": {
          "$ref": "#/definitions/user/definitions/address_locality"
        },
        "address_sub_administrative_area": {
          "$ref": "#/definitions/user/definitions/address_sub_administrative_area"
        },
        "address_administrative_area": {
          "$ref": "#/definitions/user/definitions/address_administrative_area"
        },
        "address_country": {
          "$ref": "#/definitions/user/definitions/address_country"
        },
        "address_postal_code": {
          "$ref": "#/definitions/user/definitions/address_postal_code"
        },
        "address_complement": {
          "$ref": "#/definitions/user/definitions/address_complement"
        },
        "uploaded_image_url": {
          "$ref": "#/definitions/user/definitions/uploaded_image_url"
        },
        "facebook_image_url": {
          "$ref": "#/definitions/user/definitions/facebook_image_url"
        },
        "image_url": {
          "$ref": "#/definitions/user/definitions/image_url"
        },
        "accepted_terms": {
          "$ref": "#/definitions/user/definitions/accepted_terms"
        },
        "reviewed_email": {
          "$ref": "#/definitions/user/definitions/reviewed_email"
        },
        "reviewed_location": {
          "$ref": "#/definitions/user/definitions/reviewed_location"
        },
        "admin": {
          "$ref": "#/definitions/user/definitions/admin"
        },
        "created_at": {
          "$ref": "#/definitions/user/definitions/created_at"
        },
        "updated_at": {
          "$ref": "#/definitions/user/definitions/updated_at"
        }
      },
      "required": [
        "id"
      ],
      "additionalProperties": false
    },
    "version": {
      "$schema": "http://json-schema.org/draft-04/hyper-schema",
      "title": "Tem Açúcar - Version",
      "description": "An user represents a version of the Tem Açúcar app for a platform",
      "stability": "prototype",
      "type": [
        "object"
      ],
      "definitions": {
        "id": {
          "description": "unique identifier of version",
          "readOnly": true,
          "format": "uuid",
          "type": [
            "string"
          ]
        },
        "number": {
          "description": "unique number of version for its platform",
          "readOnly": true,
          "type": [
            "string"
          ]
        },
        "platform": {
          "description": "platform of version",
          "readOnly": true,
          "enum": [
            "ios",
            "android"
          ],
          "type": [
            "string"
          ]
        },
        "expiry": {
          "description": "when version expires",
          "readOnly": true,
          "format": "date-time",
          "type": [
            "string"
          ]
        },
        "identity": {
          "anyOf": [
            {
              "$ref": "#/definitions/version/definitions/id"
            },
            {
              "$ref": "#/definitions/version/definitions/number"
            }
          ]
        },
        "created_at": {
          "description": "when version was created",
          "format": "date-time",
          "type": [
            "string"
          ]
        },
        "updated_at": {
          "description": "when version was updated",
          "format": "date-time",
          "type": [
            "string"
          ]
        }
      },
      "links": [
        {
          "description": "Info for existing version.",
          "href": "/versions/{(%23%2Fdefinitions%2Fversion%2Fdefinitions%2Fidentity)}",
          "method": "GET",
          "rel": "self",
          "title": "Info"
        },
        {
          "description": "List existing versions.",
          "href": "/versions",
          "method": "GET",
          "rel": "instances",
          "schema": {
            "additionalProperties": false,
            "properties": {
              "platform": {
                "$ref": "#/definitions/version/definitions/platform"
              }
            },
            "type": [
              "object"
            ]
          },
          "targetSchema": {
            "anyOf": [
              {
                "type": [
                  "array"
                ],
                "items": {
                  "$ref": "#/definitions/version"
                }
              },
              {
                "$ref": "#/definitions/error"
              }
            ]
          },
          "title": "List"
        }
      ],
      "properties": {
        "id": {
          "$ref": "#/definitions/version/definitions/id"
        },
        "number": {
          "$ref": "#/definitions/version/definitions/number"
        },
        "platform": {
          "$ref": "#/definitions/version/definitions/platform"
        },
        "expiry": {
          "$ref": "#/definitions/version/definitions/expiry"
        },
        "created_at": {
          "$ref": "#/definitions/version/definitions/created_at"
        },
        "updated_at": {
          "$ref": "#/definitions/version/definitions/updated_at"
        }
      },
      "required": [
        "number",
        "expiry"
      ],
      "additionalProperties": false
    }
  },
  "properties": {
    "authentication": {
      "$ref": "#/definitions/authentication"
    },
    "demand": {
      "$ref": "#/definitions/demand"
    },
    "error": {
      "$ref": "#/definitions/error"
    },
    "flag": {
      "$ref": "#/definitions/flag"
    },
    "me": {
      "$ref": "#/definitions/me"
    },
    "message": {
      "$ref": "#/definitions/message"
    },
    "password": {
      "$ref": "#/definitions/password"
    },
    "refusal": {
      "$ref": "#/definitions/refusal"
    },
    "transaction": {
      "$ref": "#/definitions/transaction"
    },
    "user": {
      "$ref": "#/definitions/user"
    },
    "version": {
      "$ref": "#/definitions/version"
    }
  },
  "description": "The API for Tem Açúcar, an app to borrow things from neighbors.",
  "id": "tem-acucar-api",
  "links": [
    {
      "href": "https://api.temacucar.com",
      "rel": "self"
    }
  ],
  "title": "Tem Açúcar API"
}
